<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polymerase Database</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            display: flex;
            min-height: 100vh;
        }
        .sidebar {
            width: 250px;
            height: 100vh;
            background-color: #2c3e50;
            color: white;
            padding-top: 20px;
        }
        .sidebar a {
            display: block;
            color: white;
            padding: 10px;
            text-decoration: none;
        }
        .sidebar a:hover, .sidebar a.active {
            background-color: #3498db;
        }
        .content {
            flex: 1;
            padding: 20px;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <nav class="sidebar">
        <a href="#" class="menu-item active" data-target="wild-type">Wild-type Polymerases</a>
        <a href="#" class="menu-item" data-target="modified">Modified Polymerases</a>
        <a href="#" class="menu-item" data-target="fusion">Fusion Domains</a>
    </nav>
    
    <div class="content">
        <input type="text" id="search" class="form-control mb-3" placeholder="Search...">
        
        <!-- Wild-type Polymerases -->
        <div id="wild-type" class="data-section">
            <h2>Wild-type Polymerases</h2>
            <table class="table table-bordered">
                <thead class="table-dark">
                    <tr>
                        <th>Name</th><th>Source</th><th>Family</th><th>5'-3' Exo Activity</th><th>DOI</th>
                    </tr>
                </thead>
                <tbody id="wild-table-body">
                    {% for poly in wild_types %}
                    <tr>
                        <td>{{ poly.name }}</td>
                        <td>{{ poly.source_strain }}</td>
                        <td>{{ poly.family }}</td>
                        <td>{{ poly.exo_activity }}</td>
                        <td><a href="{{ poly.doi }}" target="_blank">DOI</a></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        <!-- Modified Polymerases -->
        <div id="modified" class="data-section hidden">
            <h2>Modified Polymerases</h2>
            <table class="table table-bordered">
                <thead class="table-dark">
                    <tr>
                        <th>Name</th><th>Base Polymerase</th><th>Modification Type</th><th>Modifications</th><th>Optimal Temp (°C)</th>
                        <th>Melting Temp (°C)</th><th>Processivity (bp)</th><th>Binding Affinity kd (nM)</th>
                        <th>pH Stability Range</th><th>Optimal pH</th><th>Salt Tolerance NaCl (mM)</th>
                        <th>Salt Tolerance KCl (mM)</th><th>Activity (U/mg)</th><th>5'-3' Exo Activity</th><th>Enhanced Properties</th><th>Links</th>
                    </tr>
                </thead>
                <tbody id="modified-table-body">
                    {% for poly in modifieds %}
                    <tr>
                        <td>{{ poly.name }}</td>
                        <td>{{ poly.base_polymerase }}</td>
                        <td>{{ poly.modification_type }}</td>
                        <td>{{ poly.modifications }}</td>
                        <td>{{ poly.optimal_temp }}</td>
                        <td>{{ poly.melting_temp }}</td>
                        <td>{{ poly.processivity }}</td>
                        <td>{{ poly.binding_affinity }}</td>
                        <td>{{ poly.ph_stability }}</td>
                        <td>{{ poly.optimal_ph }}</td>
                        <td>{{ poly.salt_tolerance_nacl }}</td>
                        <td>{{ poly.salt_tolerance_kcl }}</td>
                        <td>{{ poly.activity }}</td>
                        <td>{{ poly.exo_activity_5_3 }}</td>
                        <td>{{ poly.enhanced_properties }}</td>
                        <td><a href="{{ poly.doi }}" target="_blank">DOI</a></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>     

<script>
    document.getElementById("modifiedSearch").addEventListener("keyup", function() {
        let filter = this.value.toLowerCase();
        let rows = document.querySelectorAll("#modified-table-body tr");
        rows.forEach(row => {
            let text = row.innerText.toLowerCase();
            row.style.display = text.includes(filter) ? "" : "none";
        });
    });
</script>


        <!-- Fusion Domains -->
        <div id="fusion" class="data-section hidden">
            <h2>Fusion Domains</h2>
            <table class="table table-bordered">
                <thead class="table-dark">
                    <tr>
                        <th>Name</th><th>Type</th><th>Source</th><th>Strain</th><th>Length</th><th>DOI</th>
                    </tr>
                </thead>
                <tbody id="fusion-table-body">
                    {% for domain in fusions %}
                    <tr>
                        <td>{{ domain.name }}</td>
                        <td>{{ domain.functional_type }}</td>
                        <td>{{ domain.source_protein }}</td>
                        <td>{{ domain.strain }}</td>
                        <td>{{ domain.length }}</td>
                        <td><a href="{{ domain.doi }}" target="_blank">DOI</a></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
    <script>
        $(document).ready(function() {
            $('.menu-item').click(function(e) {
                e.preventDefault();
                $('.menu-item').removeClass('active');
                $(this).addClass('active');
                $('.data-section').addClass('hidden');
                $('#' + $(this).data('target')).removeClass('hidden');
            });
            
            $('#search').on('input', function() {
                let searchTerm = $(this).val().toLowerCase();
                $('.data-section:not(.hidden) tbody tr').each(function() {
                    let rowText = $(this).text().toLowerCase();
                    $(this).toggle(rowText.includes(searchTerm));
                });
            });
        });
    </script>
</body>
</html>
